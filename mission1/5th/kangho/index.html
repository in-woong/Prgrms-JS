<!DOCTYPE html>
<html>
    <head>
        <title>Mission 1_강호</title>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <div id="idTodoList"></div>
        <div id="idTodoList2"></div>
        <div id="idTodoList3"></div>

        <script>
            var data = [
                {text: 'JS Start'},
                {text: 'JS Study'},
            ]

            var data2 = [
                {text: 'JS Review'},
                {text: 'JS Ask'},
            ]

            var data3 = [
                {text: 'Yay!'},
            ]
            
            function checkData(data) {
                if (!(data instanceof Array)) {
                    throw new Error('Error 2: not array');
                }

                if (data.length === 0) {
                    throw new Error('Error 3: empty array');
                }

                for (var i=0; i<data.length; i++) {
                    var keyNames = Object.keys(data[i]);
                    keyNames.forEach(function(names) {
                        if (names !== 'text') {
                            throw new Error('Error 4: wrong key name');
                        }
                    })
                }

                data.forEach(function(list) {
                    if(typeof list.text !== 'string') {
                        throw new Error('Error 5: not string type');
                    }
                })
            }

            function todoList(data, id) {
                if (!(this instanceof todoList)) {
                    throw new Error('Error 1: no new keyword');
                }
                checkData(data);
                this.data = data;
                this.render = function(id) {
                    id.innerHTML = this.data.reduce((htmlString, list) => htmlString + `<div> ${list.text} </div>`, '');
                }
                this.render(id);
            }

            // var todoList1 = todoList(data);
            var todoList1 = new todoList(data, idTodoList);
            var todoList2 = new todoList(data2, idTodoList2);
            var todoList3 = new todoList(data3, idTodoList3);

        </script>
    </body>
</html>