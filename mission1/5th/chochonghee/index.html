<html>

<head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
</head>

<body>
    <h3>오늘의 공부</h3>
    <div class="list" id="todo-list"></div>

    <h3>오늘의 운동</h3>
    <div class="list" id="todo-list-exercise"></div>

    <h3>오늘의 쇼핑</h3>
    <div class="list" id="todo-list-shopping"></div>
    <script>
        var data = [{
            text: 'JS 공부하기',
            isCompleted: true,
        }, {
            text: 'JS 복습하기',
            isCompleted: true,
        }, ]

        var dataExercise = [{
            text: '달리기 20분',
            isCompleted: false,
        }, {
            text: '스트레칭',
            isCompleted: false,
        }, ]

        var dataShopping = [{
            text: '가습기',
            isCompleted: true,
        }, {
            text: '샐러드',
            isCompleted: false,
        }, ]

        var dataNext = [{
            text: '영어소설책 10페이지 읽기',
            isCompleted: false,
        }, {
            text: '영어문장 5개 만들기',
            isCompleted: false,
        }, ]

        var dataNextExercise = [{
            text: '스쿼트 20회',
            isCompleted: false,
        }, {
            text: '윗몸일으키기 20회',
            isCompleted: false,
        }, ]

        // 이곳에서 코딩을 시작하세요!
        function TodoList(data, divName) {
            try {
                if (this === window) {
                    throw new Error(
                        "TodoList를 생성하기 위해서는 'new' keyword를 사용해야합니다."
                    )
                }

                if (!data) {
                    throw new Error('데이터의 값이 올바르지 않습니다.')
                } else if (!Array.isArray(data)) {
                    throw new Error('데이터는 리스트형태여야 합니다.')
                }
            } catch (error) {
                alert(error)
            }

            this.data = data
            this.divName = divName
            this.render = function() {
                data
                    .map(function(item) {
                        item.isCompleted ?
                            (document.querySelector(
                                divName
                            ).innerHTML += `<div><del>${item.text}</del></div>`) :
                            (document.querySelector(
                                divName
                            ).innerHTML += `<div>${item.text}</div>`)
                    })
                    .join('')

                /*  innerHTML 속성을 이용해서 구현
                   data.forEach(item => {
      if (item.isCompleted) {
          document.querySelector(
          divName
          ).innerHTML += `<div><s>${item.text}</s></div>`
      } else {
          document.querySelector(
          divName
          ).innerHTML += `<div>${item.text}</div>`
      }
      })
      */
                /* createElement, appendChild를 이용해서 구현
      data.forEach(item => {
              var todo = document.createElement('div')
              var text = document.createTextNode(item.text)

              if (item.isCompleted) {
                  var completed = document.createElement('s')
                  todo.appendChild(completed).appendChild(text)
              } else {
                  todo.appendChild(text)
              }
              document.querySelector(divName).appendChild(todo)

          })
      */
            }

            this.setState = function(nextData) {
                var nextTodoList = new TodoList(nextData, this.divName)
                nextTodoList.render()
            }
        }

        var todoList = new TodoList(data, '#todo-list')
        todoList.render()
        todoList.setState(dataNext)

        var todoList = new TodoList(dataExercise, '#todo-list-exercise')
        todoList.render()
        todoList.setState(dataNextExercise)
        todoList.setState(dataNextExercise)

        var todoList = new TodoList(dataShopping, '#todo-list-shopping')
        todoList.render()
    </script>
</body>

</html>