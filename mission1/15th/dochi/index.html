<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="todo-list"></div>
    <div id="todo-list-2"></div>
    <div id="todo-list-3"></div>
    <script>
      const data = [
        {
          text: 'JS 공부하기',
        },
        {
          text: 'JS 복습하기',
        },
      ];

      const data2 = [
        {
          text: 'JAVA 공부하기',
        },
        {
          text: 'JAVA 복습하기',
        },
      ];

      const data3 = [
        {
          text: 'C 공부하기',
        },
        {
          text: 'C 복습하기',
        },
      ];

      const $todoList = document.querySelector('#todo-list');
      const $todoList2 = document.querySelector('#todo-list-2');
      const $todoList3 = document.querySelector('#todo-list-3');

      function TodoList(data, container) {
        if (
          !data ||
          !Array.isArray(data) ||
          !data.length ||
          !data.every(
            (value) =>
              typeof value === 'object' && Object.keys(value).includes('text')
          )
        ) {
          throw new Error('올바른 데이터를 넣어주세요');
        }

        if (!new.target) {
          throw new Error('new 키워드를 사용해주세요');
        }

        const todoTemplate = (todo) => `
          <li>${todo.text}</li>
        `;

        this.data = data;
        this.render = function () {
          const todos = this.data.map((todo) => todoTemplate(todo)).join('');
          const $todos = document.createElement('ul');
          $todos.innerHTML = todos;
          container.appendChild($todos);
        };
      }

      const todoList = new TodoList(data, $todoList);
      todoList.render();

      const todoList2 = new TodoList(data2, $todoList2);
      todoList2.render();

      const todoList3 = new TodoList(data3, $todoList3);
      todoList3.render();
    </script>
  </body>
</html>
