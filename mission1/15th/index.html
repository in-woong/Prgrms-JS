<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>
  <div id="component-1"></div>
  <div id="component-2"></div>
  <div id="component-3"></div>
  <script>
    const $selector = ($target) => document.querySelector($target);
    const $creator = ($target) => document.createElement($target);

    const ERROR_MESSAGE = {
      CONSTRUCTOR: 'new 키워드를 사용해 생성자 함수로 호출해 주세요.',
      TYPE: '유효한 입력값이 아닙니다. 입력값은 배열 형태만 가능합니다.',
      CONTENT: '텍스트 컨텐츠가 존재하지 않거나 유효하지 않습니다. 텍스트 컨텐츠를 확인해 주세요.',
      FALSY: '입력한 값이 없습니다. 입력한 값이 있는지 확인해 주세요.',
      TARGET: '컴포넌트 요소가 존재하지 않습니다.'
    }

    const study = [
      {
        text: 'JS 공부하기'
      },
      {
        text: 'JS 복습하기'
      },
    ]
    const work = [
      {
        text: '기존 프로젝트 유지보수'
      },
      {
        text: '신규 프로젝트 진행'
      }
    ]
    const hobby = [
      {
        text: '풋살 레슨 참가'
      },
      {
        text: '런데이 러닝 대회 참가'
      }
    ]

    function TodoList(todos, $target) {
      if (!new.target) throw new Error(ERROR_MESSAGE.CONSTRUCTOR);
      if (!todos || !todos.length) throw new Error(ERROR_MESSAGE.FALSY);
      if (!Array.isArray(todos)) throw new Error(ERROR_MESSAGE.TYPE);
      const invalidContent = todos.every(({ text }) => !!text);
      if (!invalidContent) throw new Error(ERROR_MESSAGE.CONTENT);


      this.todos = todos;

      this.render = () => {
        const $list = $creator('ul');
        $list.innerHTML = this.todos.map((todo) => this.makeTodo(todo.text)).join('');

        if (!$target) throw new Error(ERROR_MESSAGE.TARGET);
        $selector($target).appendChild($list);
      }

      this.makeTodo = (text) => `<li>${text}</li>`
    }

    const studyTodoList = new TodoList(study, '#component-1');
    const workTodoList = new TodoList(work, '#component-2');
    const hobbyTodoList = new TodoList(hobby, '#component-3');

    studyTodoList.render();
    workTodoList.render();
    hobbyTodoList.render();
  </script>
</body>

</html>