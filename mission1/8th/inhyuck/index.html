<!DOCTYPE html>
<html lang="ko">

<head>
	<title>Mission 1</title>
	<meta charset="utf-8" />
</head>

<body>
<div id="todo-list"></div>
<script>
	const data = [
		{
			text: 'JS 공부하기'
		},
		{
			text: 'JS 복습하기'
		}
	];

	function TodoList(data) {
		if (!(this instanceof TodoList)) { //new 키워드로 호출하지 않은 경우
			errorHandler();
		}
		if (!validateTodoItems({todoItems: data})) {
			errorHandler();
		}

		this.data = data;
		this.render = function() {
			const $todoList = document.getElementById('todo-list');
			$todoList.innerHTML = this.data.map(todoItem => {
				return `<div>${todoItem.text}</div>`;
			}).join('');
		}
	}

	function validateTodoItems({todoItems}) {
		if (!todoItems)	{ //null or undefined
			return false;
		}

		if (!Array.isArray(todoItems)) { //not array
			return false;
		}

		if (todoItems.some(todoItem => !todoItem['text'])) {
			//text 키를 갖고있지 않거나 text 값이 falsy 인 경우
			return false;
		}

		return true;
	}

	function errorHandler() {
		throw new Error('error message');
	}

	const todoList = new TodoList(data);
	todoList.render();

</script>
</body>
</html>
