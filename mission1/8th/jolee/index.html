<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="todo-list"></div>
    <div id="todo-list2"></div>
    <div id="todo-list3"></div>
    <script>
      var data = [
        {
          text: 'JS 공부하기',
          isCompleted: true
        },
        {
          text: 'JS 복습하기',
          isCompleted: false
        },
      ];

      var data2 = [
        {
          text: 'JAVA 공부하기',
          isCompleted: true
        },
        {
          text: 'JAVA 복습하기',
          isCompleted: true
        }
      ];

      var data3 = [
        {
          text: 'C 공부하기',
          isCompleted: false
        },
        {
          text: 'C 복습하기',
          isCompleted: false
        }
      ];

      // 이곳에서 코딩을 시작하세요!
      function checkValidation(data) { // 재사용을 위해 별도 함수로 생성
        if (data === null || data === undefined) {
          throw new Error('[invalid] list is null or undefined');
        };
        if (!Array.isArray(data)) {
          throw new Error('[invalid] list is not array');
        };
        data.map((item) => {
          if (item.text === undefined || typeof item.text !== 'string') {
            throw new Error('[invalid] missing text in list');
          }
        });
      }

      function TodoList(data, element) {
        try {
          if(!(this instanceof TodoList)) {
            throw new Error('[invalid] list is not new');
          }
          checkValidation(data);
          this.render = function () {
            let str = '';
            data.map((item) => {
              if(item.isCompleted) {
                str += `<div><s>${item.text}</s></div>`
              } else {
                str += `<div>${item.text}</div>`
              }
            });
            document.querySelector(element).innerHTML += str
          };
        } catch (e) {
          alert(e.message);
        }
      }

      const todoList = new TodoList(data, '#todo-list');
      todoList.render();

      const todoList2 = new TodoList(data2, '#todo-list2');
      todoList2.render();

      const todoList3 = new TodoList(data3, '#todo-list3');
      todoList3.render();
    </script>
  </body>
</html>
