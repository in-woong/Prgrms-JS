<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>
  <div id="todo-list"></div>
  <div id="complete-list"></div>
  <div id="wish-list"></div>
  <script>
    var data = [
      {
        text: 'JS 공부하기',
        isCompleted: true,
      },
      {
        text: 'JS 복습하기',
        isCompleted: false,
      }
    ]
    // 이곳에서 코딩을 시작하세요!

    const completeData = [
        {
          text: 'quiz 풀기',
          isCompleted: true,
        },
        {
          text: 'quiz 해설 복습하기',
          isCompleted: true,
        },
      ];

      const wishData = [
        { 
          text: '파천갑주 얻기',
          isCompleted: false,
        },
        {
          text: '파천비곤얻기',
          isCompleted: false,
        },
      ];

      const nextData = [
        {
          text: '꼬깔콘',
          isCompleted: false,
        },
        {
          text: '치토스',
          isCompleted: false,
        }
      ];

      const inCorrectData = [
        {
          text: 12345
        }
      ];
    
    function isValid(that){
        if(that.data === null || that.data === undefined) {
            throw new Error('data가 null 혹은 undefinded입니다.');
        }
        if(!Array.isArray(that.data)) {
            throw new Error('data가 Array가 아닙니다.');
        }
        if(!that.data.every(d=>typeof d.text === 'string')) {
            throw new Error('data의 타입이 적절하지않습니다.');
        }
        // if(!new.taget) {
        //     throw new Error('new 키워드로 작성해주세요.');
        // }
    }

    function TodoList(data, id){
        this.data = data;

        if(!new.target){
            throw new Error('new 키워드로 작성해주세요.');
        }
        isValid(this);
        this.render = () => {
            let html = this.data.map(d=> {return d.isCompleted ? `<div><s>${d.text}</s></div>` : `<div>${d.text}</div>`}).join(' ');
            document.querySelector('#'+id).innerHTML = html;
        }

        this.setState = (nextData) => {
            this.data = nextData;
            this.render();
        }

        this.render();
    }

    const todoList = new TodoList(data, 'todo-list');
    const completeList = new TodoList(completeData, 'complete-list');
    const wishList = new TodoList(wishData, 'wish-list');
    todoList.setState(nextData);
    // const nullList = new TodoList();
    // const todoObj = new TodoList({ 
    //       text: '파천갑주 얻기',
    //       isCompleted: false,
    //     }, 'todo-list');
    // const inCorrectList = new TodoList(inCorrectData, 'todo-list');
    // const withoutNew = TodoList(data, 'todo-list');

  </script>
</body>
</html>