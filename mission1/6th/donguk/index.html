<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TodoList</title>
</head>
<body>
    <h1>Todo1</h1>
    <div id="todo-list"></div>
    <h1>Todo2</h1>
    <div id="todo-list2"></div>
    <h1>Todo3</h1>
    <div id="todo-list3"></div>
    <script>
      const data = [
        {text: '실행 컨텍스트 공부하기', isCompleted: true},
        {text: '프로그래머스 풀기', isCompleted: false}
      ]

      const data2 = [
        {text: '잠 일찍 자기', isCompleted: false},
        {text: 'arrow function this 공부하기', isCompleted: true}
      ]

      const data3 = [
        {text: '집 청소하기', isCompleted: true},
        {text: '분리수거 하기', isCompleted: true},
        {text: 'JS 이벤트 공부하기', isCompleted: false}
      ]

      function convertToLiNode(data) {
        const { text, isCompleted } = data
        return `<li>${isCompleted ? `<s>${text}</s>` : text}</li>`
      }

      function TodoList(data, target) {
        if (!(this instanceof arguments.callee)) throw new Error('Use new keyword')
        if (!data || !target) throw new Error('arguments is empty')
        if (!Array.isArray(data)) throw new Error('data must be Array')
        if (!data.length) throw new Error('data array is empty')
        if (data.some(v => !v) || !data.every(v => Object.keys(v).length === 2)) throw new Error('Type Error')

        this.data = data
        this.selector = document.querySelector(target)
        this.render = function () {
          this.selector.innerHTML = `<ul>${this.data.map(v => convertToLiNode(v)).join('')}</ul>`
        }
      }
      try{
        const todoList = new TodoList(data, '#todo-list')
        todoList.render()
        const todoList2 = new TodoList(data2, '#todo-list2')
        todoList2.render()
        const todoList3 = new TodoList(data3, '#todo-list3')
        todoList3.render()
      } catch(e){
        console.error(e)
      }
    </script>
</body>
</html>
