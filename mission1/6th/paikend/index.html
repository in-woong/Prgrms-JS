<html>

<head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
</head>

<body>
    <div id="todo-list1"></div>
    <div id="todo-list2"></div>
    <div id="todo-list3"></div>

    <script>
        var data1 = [
            {
            text: 'JS 공부하기',
            isCompleted: true
            },
            {
            text: 'JS 복습하기',
            isCompleted: false
            }
        ]
        var data2 = [
            {
            text: '알고리즘 공부하기',
            isCompleted: false
            },
            {
            text: '알고리즘 복습하기',
            isCompleted: true
            }
        ]
        var data3 = [
            {
            text: '아키텍쳐 공부하기',
            isCompleted: true
            },
            {
            text: '아키텍쳐 복습하기',
            isCompleted: false
            }
        ]
        // 이곳에서 코딩을 시작하세요!
        function TodoList(data, divId){
            // validation
            if(!(this instanceof TodoList)) 
                throw new Error('it is not Instance. must use new keyword.');
            if(data === null || data === undefined || !Array.isArray(data) || data.length < 1)
                throw new Error('it is invalid data.');
            this.data = data;
            this.divId = divId;
            this.render = function(){
            this.data.forEach(data => {
                if(data.hasOwnProperty('text'))
                    (data.isCompleted) ? document.querySelector(this.divId).innerHTML += `<div><s>${data.text}</s></div>` : document.querySelector(divId).innerHTML += `<div>${data.text}</div>`
                });
            }
            this.setState = (nextData) => {
                document.querySelector(this.divId).innerHTML = ""
                nextData.forEach(data => {
                    if(data.hasOwnProperty('text'))
                        (data.isCompleted) ? document.querySelector(this.divId).innerHTML += `<div><s>${data.text}</s></div>` : document.querySelector(divId).innerHTML += `<div>${data.text}</div>`
                })
            }    
        }
        var todoList1 = new TodoList(data1, "#todo-list1");
        var todoList2 = new TodoList(data2, "#todo-list2");
        var todoList3 = new TodoList(data3, "#todo-list3");
        todoList1.render()
        todoList2.render()
        todoList3.render()
        setTimeout(function () {
            todoList3.setState(data2)
        }, 5000);
    </script>
</body>
</html>