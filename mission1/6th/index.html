
<!DOCTYPE html>
<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <style>
    #todo-list, #todo-list-in-week, #todo-list-in-weekend {
      padding: 1rem;
    }
  </style>

  <body>
    <div id="todo-list"></div>
    <div id="todo-list-in-week"></div>
    <div id="todo-list-in-weekend"></div>

    <script>
      var data = [
        {
          text: 'JS 공부하기',
          isCompleted: true,
        },
        {
          text: 'JS 복습하기',
          isCompleted: false,
        }
      ]
      var studyInWeek = [
        {
          text: '월~금 퇴근 후 토이프로젝트 개발',
          isCompleted: true,
        },
        {
          text: '수요일에 퇴근 후 스터디',
          isCompleted: true,
        },
        {
          text: '청소',
          isCompleted: false,
        }
      ]
      var studyInWeekend = [
        {
          text: '프론트엔드 전반적인 공부',
          isCompleted: false,
        },
        {
          text: '주중에 하던 토이프로젝트 코딩',
          isCompleted: true,
        },
        {
          text: '옷 세탁',
          isCompleted: false,
        }
      ]

      let errorMessage = {
        null_or_undefined : 'this data is null or undefined',
        not_object : 'this data is not an object',
        not_array : 'this data is not an array',
        not_exist_test_property : '\"text\" property does not exist in this data',
      }
      
      function isUndefinedOrNull(data){
        let value = data
        return value === null || value === undefined
      }

      function isNotExistTextProperty(data){
        let value = data
        let result = false
        value.forEach(element => {
          if(!('text' in element)){
            result = true
            return
          }
        });
        return result
      }

      function checkTodoListDataType(object){
        let todoList = object
        if(isUndefinedOrNull(todoList.todoData)){
          throw new Error(errorMessage['null_or_undefined'])
        }
        if(!Array.isArray(todoList.todoData)){
          throw new Error(errorMessage['not_array'])
        }
        if(isNotExistTextProperty(todoList.todoData)){
          throw new Error(errorMessage['not_exist_test_property'])
        }
      }

      function checkTodoListInstance(object){
        let todoList = object
        if(!(todoList instanceof TodoList)){
          throw new Error(errorMessage['not_object'])
        }
      }

      function isCorrectTodoList(object){
        let todoList = object
        try {
          checkTodoListInstance(object)
          checkTodoListDataType(object)
        }catch (e){
          console.error(e)
          return false
        }
        return true
      }

      function todoListIsCompleted(isCheck, text){
        let isCompleted = isCheck
        let todoText = text

        if(isCompleted){
          return `<div><s>${todoText}</s></div>`
        }

        return `<div>${todoText}</div>`
      }
      
      function TodoList(selectorId, todoListData){
        this.id = selectorId
        this.todoData = todoListData
        this.render = function(){
          this.todoData.forEach(element => {
            document.querySelector(this.id).innerHTML += todoListIsCompleted(element.isCompleted, element.text)
          });
        }
      }

      function showTodoList(selectorId, todoListData){
        let id = selectorId
        let todoData = todoListData
        let todoList = new TodoList(id, todoData)
        isCorrectTodoList(todoList) ? todoList.render() : ''
      }

      showTodoList('#todo-list', data)
      showTodoList('#todo-list-in-week', studyInWeek)
      showTodoList('#todo-list-in-weekend', studyInWeekend)

    </script>
  </body>
</html>