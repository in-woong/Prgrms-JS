
<!DOCTYPE html>
<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="todo-list"></div>
    <script>
      var data = [
        {
          text: 'JS 공부하기'
        },
        {
          text: 'JS 복습하기'
        }
      ]

      let errorMessage = {
        null_or_undefined : 'this data is null or undefined',
        not_object : 'this data is not an object',
        not_array : 'this data is not an array',
        not_exist_test_property : '\"text\" property does not exist in this data',
      }
      
      function isUndefinedOrNull(data){
        return data === null || data === undefined
      }

      function isNotExistTextProperty(data){
        let result = false
        data.forEach(element => {
          if(!('text' in element)){
            result = true
            return
          }
        });
        return result
      }

      function checkTodoListDataType(object){
        if(isUndefinedOrNull(object.todoData)){
          throw new Error(errorMessage['null_or_undefined'])
        }
        if(!Array.isArray(object.todoData)){
          throw new Error(errorMessage['not_array'])
        }
        if(isNotExistTextProperty(object.todoData)){
          throw new Error(errorMessage['not_exist_test_property'])
        }
      }

      function checkTodoListInstance(object){
        if(!(object instanceof TodoList)){
          throw new Error(errorMessage['not_object'])
        }
      }

      function isCorrectTodoList(object){
        try {
          checkTodoListInstance(object)
          checkTodoListDataType(object)
        }catch (e){
          console.error(e)
          return false
        }
        return true
      }
      
      function TodoList(todoListData){
        this.todoData = todoListData
        this.render = function(){
          this.todoData.forEach(element => {
            document.querySelector('#todo-list').innerHTML += `<div>${element.text}</div>`
          });
        }
      }
      let todoList = new TodoList(data)
      isCorrectTodoList(todoList) ? todoList.render() : ''

    </script>
  </body>
</html>