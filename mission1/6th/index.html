
<!DOCTYPE html>
<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <style>
    #todo-list, #todo-list-in-week, #todo-list-in-weekend {
      padding: 1rem;
    }
  </style>

  <body>
    <div id="todo-list"></div>
    <div id="todo-list-in-week"></div>
    <div id="todo-list-in-weekend"></div>

    <script>
      var data = [
        {
          text: 'JS 공부하기'
        },
        {
          text: 'JS 복습하기'
        }
      ]
      var studyInWeek = [
        {
          text: '월~금 퇴근 후 토이프로젝트 개발'
        },
        {
          text: '수요일에 퇴근 후 스터디'
        },
        {
          text: '청소'
        }
      ]
      var studyInWeekend = [
        {
          text: '프론트엔드 전반적인 공부'
        },
        {
          text: '주중에 하던 토이프로젝트 코딩'
        },
        {
          text: '옷 세탁'
        }
      ]

      let errorMessage = {
        null_or_undefined : 'this data is null or undefined',
        not_object : 'this data is not an object',
        not_array : 'this data is not an array',
        not_exist_test_property : '\"text\" property does not exist in this data',
      }
      
      function isUndefinedOrNull(data){
        return data === null || data === undefined
      }

      function isNotExistTextProperty(data){
        let result = false
        data.forEach(element => {
          if(!('text' in element)){
            result = true
            return
          }
        });
        return result
      }

      function checkTodoListDataType(object){
        if(isUndefinedOrNull(object.todoData)){
          throw new Error(errorMessage['null_or_undefined'])
        }
        if(!Array.isArray(object.todoData)){
          throw new Error(errorMessage['not_array'])
        }
        if(isNotExistTextProperty(object.todoData)){
          throw new Error(errorMessage['not_exist_test_property'])
        }
      }

      function checkTodoListInstance(object){
        if(!(object instanceof TodoList)){
          throw new Error(errorMessage['not_object'])
        }
      }

      function isCorrectTodoList(object){
        try {
          checkTodoListInstance(object)
          checkTodoListDataType(object)
        }catch (e){
          console.error(e)
          return false
        }
        return true
      }
      
      function TodoList(selectorId, todoListData){
        let id = selectorId
        this.todoData = todoListData
        this.render = function(){
          this.todoData.forEach(element => {
            document.querySelector(id).innerHTML += `<div>${element.text}</div>`
          });
        }
      }

      function showTodoList(selectorId, todoListData){
        let id = selectorId
        let todoData = todoListData
        let todoList = new TodoList(id, todoData)
        isCorrectTodoList(todoList) ? todoList.render() : ''
      }

      showTodoList('#todo-list', data)
      showTodoList('#todo-list-in-week', studyInWeek)
      showTodoList('#todo-list-in-weekend', studyInWeekend)

    </script>
  </body>
</html>