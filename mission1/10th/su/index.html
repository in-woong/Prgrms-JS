<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="todo-list"></div>
    <div id="todo-list-2"></div>
    <div id="todo-list-3"></div>

    <script>
      const data = [
        {
          text: 'JS 공부하기',
          isCompleted: true,
        },
        {
          text: 'JS 복습하기',
          isCompleted: false,
        }
      ];

      const data2 = [
        {
          text: '운동 하기',
          isCompleted: false,
        },
        {
          text: '책 읽기',
          isCompleted: true,
        }
      ];
      
      const data3 = [
        {
          text: '밥 먹기',
          isCompleted: true,
        },
        {
          text: '글쓰기',
          isCompleted: false,
        }
      ];

      function TodoList(data ,selector) {

        this.data = data;
        this.selector = selector;
        this.element = document.querySelector(this.selector);

        this.validation = function() {
          if(!data) throw new Error("data is error");
          if(!selector) throw new Error("id is error");
          if(!Array.isArray(data)) throw new Error("data is not Array");
          if(!(this instanceof TodoList)) throw new Error("Add new keyword");
        }

        this.render = function() {
          this.validation();

          const liData = this.data.map(function(_data) {
            if(_data.isCompleted) {
              return `<li><s>${_data.text}</s></li>`;
            }
            return `<li>${_data.text}</li>`;
          }).join(''); 
     
          this.element.innerHTML = `<ul>${liData}</ul>`;
          
        }

        this.setState = function(nextData) {
          this.data = nextData;
          this.render();
        }
      
        this.render();
      }

      var todoList = new TodoList(data,'#todo-list');

      var todoList2 = new TodoList(data2,'#todo-list-2');

      var todoList3 = new TodoList(data3,'#todo-list-3');

      setTimeout(()=> {
        todoList3.setState(data2);

      },3000)

    </script>
  </body>
</html>
