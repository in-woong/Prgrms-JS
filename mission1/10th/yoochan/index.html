<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>
  <div id="todo-list"></div>
  <div id="exercise-list"></div>
  <div id="play-list"></div>
  <script>
    var todoList = [
      {
        text: 'JS 공부하기',
        isCompleted: true
      },
      {
        text: 'JS 복습하기',
        isCompleted: false
      }
    ]
    var exerciseList = [
      {
        text: '일찍 일어나기',
        isCompleted: true
      },
      {
        text: '운동하기',
        isCompleted: true
      }
    ]
    var playList = [
      {
        text: '영화 보기',
        isCompleted: false
      },
      {
        text: '롤하기',
        isCompleted: false
      }
    ]
  // 이곳에서 코딩을 시작하세요!
  function TodoList(dataList, targetId) {
    if(!new.target) {
      throw new Error("no use new keword");
    }
    
    errorTest(dataList);

    this.render = function() {
      let innerText = '';
      const todoList = document.querySelector(targetId);
      dataList.forEach((value) => {
        innerText += value.isCompleted ? `<div><s>${value.text}</s></div>` : `<div>${value.text}</div>`;
      })
      todoList.innerHTML = innerText;
    }
    this.render();
  }

  function errorTest(data) {
    if(data === null || data === undefined) {
      throw new Error("Data is empty");
    }
    if(!Array.isArray(data)) {
      throw new Error("Data is not array");
    }
    
      data.forEach((value) => {
        if (typeof value.text !== 'string'){
          throw new Error("The content of the data is strange");
        }
        if(value == null || value == undefined) {
          throw new Error("data value is empty");
        }
      })

  var todoList = new TodoList(todoList, '#todo-list');
  var exerciseList = new TodoList(exerciseList, '#exercise-list');
  var playList = new TodoList(playList, '#play-list');
  </script>
</body>
</html>
