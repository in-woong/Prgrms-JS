<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="todo-list"></div>
    <script>
      const data = [
        {
          text: 'JS 공부하기',
          isCompleted: true,
        },
        {
          text: 'JS 복습하기',
          isCompleted: false,
        },
      ];

      function TodoList(data) {
        if(data === null) throw new Error("data is null");
        if(data === undefined) throw new Error("data is undefined");
        if(!Array.isArray(data)) throw new Error("data is not Array");
        if(!(this instanceof TodoList)) throw new Error("Add new keyword");
      

        this.data = data;
        this.element = document.querySelector('#todo-list');

        this.render = function() {
          
          var liData = this.data.map(function(_data) {
            return `<li>${_data.text}</li>`;
          }).join(''); 

          var innerHtmlSelector = this.element.innerHTML;

          if(innerHtmlSelector) {
            document.querySelector('#todo-list > ul').innerHTML += `${liData}`;
          } else {
            this.element.innerHTML += `<ul>${liData}</ul>`;
          }
        }

        this.setState = function(data) {
          this.data = data;
          this.element.removeChild(this.element.firstChild);
          this.render();
        }
      }

      var todoList = new TodoList(data);
      todoList.render();

      var todoList2 = new TodoList(data);
      todoList2.render();
      todoList2.setState([
        {
          text: 'JS 공부하기3',
          isCompleted: true,
        },
        {
          text: 'JS 복습하기4',
          isCompleted: false,
        },
      ]);

      var todoList3 = TodoList(data);

    </script>
  </body>
</html>
