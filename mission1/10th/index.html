<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="todo-list"></div>
    <div id="todo-list-2"></div>
    <div id="todo-list-3"></div>

    <script>
      const data = [
        {
          text: 'JS 공부하기',
          isCompleted: true,
        },
        {
          text: 'JS 복습하기',
          isCompleted: false,
        }
      ];

      const data2 = [
        {
          text: '운동 하기',
          isCompleted: false,
        },
        {
          text: '책 읽기',
          isCompleted: false,
        }
      ];
      
      const data3 = [
        {
          text: '밥 먹기',
          isCompleted: false,
        },
        {
          text: '글쓰기',
          isCompleted: false,
        }
      ];

      function TodoList(data ,id) {
        if(!data) throw new Error("data is error");
        if(!id) throw new Error("id is error");
        if(!Array.isArray(data)) throw new Error("data is not Array");
        if(!(this instanceof TodoList)) throw new Error("Add new keyword");

        this.data = data;
        this.id = id;
        this.element = document.querySelector('#'+ this.id);

        this.render = function() {
          
          var liData = this.data.map(function(_data) {
            return `<li>${_data.text}</li>`;
          }).join(''); 

          var innerHtmlSelector = this.element.innerHTML;

          if(innerHtmlSelector) {
            document.querySelector(`#${this.id} > ul`).innerHTML += `${liData}`;
          } else {
            this.element.innerHTML += `<ul>${liData}</ul>`;
          }
        }

        this.setState = function(data) {
          this.data = data;
          this.element.removeChild(this.element.firstChild);
          this.render();
        }
      }

      var todoList = new TodoList(data,'todo-list');
      todoList.render();

      var todoList2 = new TodoList(data2,'todo-list-2');
      todoList2.render();

      var todoList3 = new TodoList(data3,'todo-list-3');
      todoList3.render();

    </script>
  </body>
</html>
