<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="todo-list"></div>
    <div id="todo-list2"></div>
    <div id="todo-list3"></div>
    <script>
      // Old Way (IE cover)
      var data = [
        {
          text: 'JS 공부하기',
          isCompleted: true,
        },
        {
          text: 'JS 복습하기',
          isCompleted: false,
        },
      ]
      var data2 = [
        {
          text: 'CSS 공부하기',
          isCompleted: false,
        },
        {
          text: 'CSS 복습하기',
          isCompleted: true,
        },
      ]
      var data3 = [
        {
          text: 'TS 공부하기',
          isCompleted: true,
        },
        {
          text: 'TS 복습하기',
          isCompleted: true,
        },
      ]
      // 이곳에서 코딩을 시작하세요!
      function TodoList(data, selector) {
        this.data = data
        this.selector = selector

        // Validate
        if (!(this instanceof TodoList)) {
          throw new Error('new 키워드를 사용해주세요!')
        }
        if (
          !Array.isArray(this.data) ||
          this.data === undefined ||
          this.data === null
        ) {
          throw new Error('배열이 아니거나 값이 없습니다.')
        }

        this.setState = function (data) {
          this.data = data
          this.render()
        }

        var todoList = document.querySelector(this.selector)

        this.render = function () {
          var html = this.data
            .map(function (item) {
              return item.isCompleted === true
                ? '<div><s>' + item.text + '</s></div>'
                : '<div>' + item.text + '</div>'
            })
            .join('\n')
          todoList.insertAdjacentHTML('beforeend', html)
        }
      }

      var todoList = new TodoList(data, '#todo-list')
      todoList.setState(data2)
    </script>
  </body>
</html>
