<html>
    <head>
        <title>Mission 1</title>
        <meta charset="utf-8" />
    </head>

    <body>
        <div id="todo-list"></div>
        <div id="todo-list-saturday"></div>
        <div id="todo-list-sunday"></div>
        <script>
            var data = [
            {
                text: 'JS 공부하기'
            },
            {
                text: 'JS 복습하기'
            }
            ];
            // 이곳에서 코딩을 시작하세요!
            // 인스턴스 생성 및 파라미터 밸리데이션
            const validate = ( self, data ) => {
                // new로 안부르면 에러
                if ( self === window ) {
                        throw new Error( 'invalid access' );
                    }
                // 배열이 아니거나, 비어있거나, text 프로퍼티 없으면 에러
                if ( !Array.isArray( data ) || !data.length || data.some( ele => !ele.text ) ) {
                    throw new Error( 'invalid format of parameter' );
                }
            }
            // 1번
            function TodoList( data ) {
                validate( this, data );
                this.data = data;
                this.render = function() {
                    const innerText = this.data.map( row => `<div>${row.text}</div>` );
                    document.querySelector('#todo-list').innerHTML = innerText.join('');
                }
            }
            const todoList = new TodoList(data);
            todoList.render();

            // 2,3번
            class TodoListClass {
                constructor( data, elementId ) {
                    validate( this, data );
                    this.data = data;
                    this.elementId = ( elementId && typeof elementId === 'string' && `#${ elementId }` ) || '#todo-list'
                }
                render() {
                    let innerText = '';
                    this.data.forEach( row => { innerText += `<div>${row.text}</div>` });
                    document.querySelector( this.elementId ).innerHTML = innerText;
                }
            };
            const data2 = [{ text: '자기' }, { text: '유튜브보기' }, { text: '영화보기' }];
            const data3 = [{ text: '교회가기' }, { text: '학교가기' }, { text: '숙제하기' }];
            const todoList2 = new TodoListClass(data2, 'todo-list-saturday');
            const todoList3 = new TodoListClass(data3, 'todo-list-sunday');
            todoList2.render();
            todoList3.render();
        </script>
    </body>
</html>
