<html>
<header>
    <meta charset="utf-8" />
    <title>Misson 1</title>
</header>

<body>
    <div id="todo-list"></div>
    <div id="todo-list2"></div>
    <script>
        var data = [
            {
                text: 'JS 공부하기',
                isCompleted : true, 
            },
            {
                text: 'JS 복습하기',
                isCompleted : false,
            }
        ]
        // 이곳에 코딩을 시작하세요!
        var data2 = [
            {
                text: 'data2 JS 공부하기',
                isCompleted : false,
            }, {
                text: 'data2 JS 복습하기',
                isCompleted : false,
            }
        ]
        function TodoList(data, id) {
            this.data = data;
            this.render = function () {
                if (!Array.isArray(data)) {
                    throw new Error('데이터의 타입이 배열이 아닙니다.');
                }
                if(!document.getElementById(id)){
                    throw new Error('없는 테그 아이디 입니다.');
                }
                data.forEach((v, i) => {
                    if (!v.text) {
                        throw new Error('데이터 배열안의 text가 비어있습니다.');
                    }
                })
                var htmlStr = ''
                this.data.forEach((v, i) => {
                    if(v.isCompleted){
                        htmlStr += `<s><div>${v.text}</div></s>`;
                    }else{
                        htmlStr += `<div>${v.text}</div>`;
                    }
                    
                });

                document.getElementById(id).innerHTML = htmlStr;
                
            }
            this.setState = function(nextData){
                this.data = nextData;
                this.render();
            }
        }


        let todoList = new TodoList(data, 'todo-list');

        if (!todoList) {
            throw new Error('new 생성자를 통해 초기화 해주세요!');
        }
        console.log(todoList);
        todoList.render();

        let todoList2 = new TodoList(data2, 'todo-list2');
        if (!todoList2) {
            throw new Error('new 생성자를 통해 초기화 해주세요!');
        } 
        console.log(todoList2);
        todoList2.render();
        todoList.setState(data2);
            // new 키워드로 함수의 인스턴스를 만들 때 올바른 파라메터가 넘어오지 않을 경우 에러 발생하게 하기
            // new 키워드 안 붙이고 함수 실행 시 에러 발생하게 하기

    </script>
</body>

</html>