<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>
  <div id="todo-list"></div>
  <div id="todo-list2"></div>
  <div id="todo-list3"></div>

  <script>
    
	// 이곳에서 코딩을 시작하세요!

    var data = [
        {
        text: 'JS 공부하기',
        isCompleted: true
        },
        {
        text: 'JS 복습하기',
        isCompleted: false
        },
        {
        text: 'JS 예습하기',
        isCompleted: true
        }
    ]
    var data2 = [
        {
        text: '영어 공부하기',
        isCompleted: false
        },
        {
        text: '일본어 공부하기',
        isCompleted: true
        },
        {
        text: '중국어 공부하기',
        isCompleted: false
        }
    ]
    var data3 = [
        {
        text: '용과같이5 깨기',
        isCompleted: true
        },
        {
        text: '니드포스피드카본 깨기',
        isCompleted: false
        },
        {
        text: '에픽게임즈 지우기',
        isCompleted: true
        }
    ]
    var data4 = [
        {
        text: '잠이나 퍼자기',
        isCompleted: true
        }
    ]

    function TodoList(data, id) {
        
        this.data = data;
        this.id = id;

        if (this.data === null) {
            throw new Error('this is null');
        } 
        if (this.data === undefined) {
            throw new Error('this is undefined');
        } 
        if (!new.target) {
            throw new Error('this is not the instance');
        } 
        if (!Array.isArray(data)) {
            throw new Error('this is not Array');
        } 
        
        this.render = function() {
            let jsTxt = '';
            for (let i=0; i<this.data.length; i++){
                if (this.data[i].isCompleted){
                    jsTxt += `<li><s>${this.data[i].text}</s></li>` 
                } else {
                    jsTxt += `<li>${this.data[i].text}</li>` 
                }            
            }
            document.querySelector(id).innerHTML = jsTxt;
        }

        this.setState = function(data4) {
            this.data = data4;
            this.render();
        }
    }

    const todoList = new TodoList(data, '#todo-list');
    const todoList2 = new TodoList(data2, '#todo-list2');
    const todoList3 = new TodoList(data3, '#todo-list3');

    todoList.render();
    todoList2.render();
    todoList3.render();
    
    setTimeout(() => {todoList.setState(data4)}, 2000);

  </script>
</body>
</html>