<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <main id="app"></main>
    <script>
      const data = [
        {
          text: 'JS 공부하기',
          isCompleted: false,
        },
        {
          text: 'JS 복습하기',
          isCompleted: true,
        },
        {
          text: '세션 진행하기',
          isCompleted: false
        }
      ]


      function TodoList($app, data) {
        if (this === window) {
          throw new Error('좋은 말 할 때 new 붙여라')
        }

        if (!$app) {
          throw new Error('$app이 올바르지 않습니다.')
        }

        if (!data || !Array.isArray(data)) {
          throw new Error('data가 올바르지 않습니다.')
        }

        this.$target = document.createElement('div')
        this.$target.setAttribute('data-component-type', 'TodoList')
        $app.appendChild(this.$target)

        this.data = data

        this.render = () => {
          const htmlString = data.map(({ text, isCompleted }) =>
            isCompleted ? `<li><s>${text}</s></li>` : `<li>${text}</li>`
          ).join('')

          this.$target.innerHTML = `<ul>${htmlString}</ul>`
        }

        this.render()
      }

      try {
        const $app = document.querySelector('#app')
        new TodoList($app, data)
      } catch(e) {
        alert(e.message)
      }

    </script>
  </body>
</html>
