<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>
  <div id="todo-list"></div>
  <script>
    var data = [
      {
        text: 'JS 공부하기'
      },
      {
        text: 'JS 복습하기'
      }
    ]
	// 이곳에서 코딩을 시작하세요!
  
    const todoListElem = document.querySelector('#todo-list');

    function TodoList(data){
      // new를 통해 생성하지 않고 TodoList를 호출할 경우 this가 window 객체가 된다.
      if(!(this instanceof TodoList)) throw new Error('new를 통해 생성해주세요');

      if(!data || data.length === 0) {
        // data가 null, undefined인 경우 + 빈 배열인 경우
        throw new Error("데이터가 존재하지 않습니다");
      }else if(!Array.isArray(data)){
        // data가 객체인경우
        throw new Error("배열을 입력해주세요");
      }else{
        data.forEach(x=>{
          // data 내부의 객체가 text를 key로 가지고 있지 않은 경우 
          if(!x.text) throw new Error('text가 존재하지 않습니다.')
          // text를 key로 가지고 있으나 문자열이 아닌경우
          if(typeof x.text !== 'string') throw new Error('text가 string 형태가 아닙니다.')
        })
      }
      
      this.data = data;
      this.render = () => {
        // appendChild는 매번 dom을 다시 계산해야하기 때문에 innerHTML이 더 나아보임
        let htmlStr = this.data.reduce((acc, item) =>  acc + `<div>${item.text}</div>\n`, '');
        todoListElem.innerHTML = htmlStr;
      }
    }
    const todoList = new TodoList(data);
    todoList.render();

  </script>
</body>
</html>