<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <ul id="todo-list-one"></ul>
    <ul id="todo-list-two"></ul>
    <ul id="todo-list-three"></ul>

    <script>
      const todos1 = [
        {
          text: '[todos1] JS 예습하기',
          isCompleted: true,
        },
        {
          text: '[todos1] JS 복습하기',
          isCompleted: false,
        },
      ]

      const todos2 = [
        {
          text: '[todos2] JS 공부하기',
          isCompleted: true,
        },
        {
          text: '[todos2] JS 복습하기',
          isCompleted: false,
        },
      ]

      const todos3 = [
        {
          text: '[todos3] JS 공부하기',
          isCompleted: true,
        },
        {
          text: '[todos3] JS 복습하기',
          isCompleted: false,
        },
      ]

      const nextData = [
        {
          text: '[todos1] 피자먹기',
          isCompleted: true,
        },
        {
          text: '[todos1] 마라탕먹기',
          isCompleted: false,
        },
      ]

      function createError({ type }) {
        const errorMessages = {
          array: '파라미터가 배열이 아닙니다',
          text: 'text의 타입이 string이 아닙니다',
        }

        throw new Error(errorMessages[type])
      }

      class TodoList {
        constructor({ selector, data }) {
          this.data = data
          this.selector = selector

          this.render()
        }

        setState(data) {
          this.data = data

          this.render()
        }

        checkParameter(data) {
          if (!Array.isArray(data)) {
            createError({ type: 'array' })
          }
        }

        checkTextType(text) {
          if (typeof text !== 'string') {
            createError({ type: 'text' })
          }
        }

        render() {
          const { selector, data } = this

          this.checkParameter(data)

          document.querySelector(selector).innerHTML = data
            .map(({ text, isCompleted }) => {
              this.checkTextType(text)

              return `<li>${isCompleted ? `<s>${text}</s>` : `${text}`}</li>`
            })
            .join('')
        }
      }

      const todoListOne = new TodoList({
        selector: '#todo-list-one',
        data: todos1,
      })

      const todoListTwo = new TodoList({
        selector: '#todo-list-two',
        data: todos2,
      })

      const todoListThree = new TodoList({
        selector: '#todo-list-three',
        data: todos3,
      })

      todoListOne.setState(nextData)
    </script>
  </body>
</html>
