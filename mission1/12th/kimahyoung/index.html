<html>

<head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
</head>

<body>
    <div id="todo-list"></div>
    <div id="program-list"></div>
    <div id="exercise-list"></div>

    <script>
        var data = [{
            text: 'JS 공부하기',
            isCompleted: false
        }, {
            text: 'JS 복습하기',
            isCompleted: false
        }]

        var program = [{
            text: 'JS 스터디 과제하기',
            isCompleted: true
        }, {
            text: 'vue로 날씨 앱 만들기',
            isCompleted: false
        }]

        var exercise = [{
            text: '산책하기',
            isCompleted: true
        }, {
            text: '스트레칭하기',
            isCompleted: false
        }]

        function TodoList(data, name) {
            this.data = data;

            const dataCheck = () => {
                if (!data || !Array.isArray(data)) {
                    throw new Error('배열이 아닙니다')
                } else if (!(this instanceof TodoList)) {
                    throw new Error('new 키워드 안 붙이면 에러 발생')
                }
            }

            dataCheck()

            const todo = this.data.map(({
                    text,
                    isCompleted
                }) =>
                isCompleted ? `<div><s>${text}</s></div>` : `<div>${text}</div>`).join('')

            this.render = function() {
                document.querySelector(`#${name}`).innerHTML = todo
            }
        }

        var todoList = new TodoList(data, 'todo-list');
        var programList = new TodoList(program, 'program-list');
        var exerciseList = new TodoList(exercise, 'exercise-list');

        todoList.render();
        programList.render();
        exerciseList.render();
    </script>
</body>

</html>