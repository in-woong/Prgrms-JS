<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="todo-list"></div>
    <script>
      const data = [
        {
          text: 'JS 공부하기',
          isCompleted: true,
        },
        {
          text: 'JS 복습하기',
          isCompleted: false,
        },
      ]

      const $ = (selector, scope = document) => scope.querySelector(selector);

      const isInstanceFromNew = (instance, targetFunction) => instance instanceof targetFunction;
      const isValidData = (data) => {
        if (data === null || data === undefined) {
          return false;
        }
        if (!Array.isArray(data)) {
          return false;
        }
        return true;
      }

      const isValid = (targetFunction, instance, data) => {
        if (!isInstanceFromNew(instance, targetFunction)) {
          throw new Error('error message');
        }
        if (!isValidData(data)) {
          throw new Error('error message');
        }
      }

      const TodoList = function(data) {
        try {
          isValid(TodoList, this, data);
        } catch (e) {
          console.error(e);
        }

        this.state = data;

        this.render = function () {
          $('#todo-list').innerHTML = this.state.map(({text}) =>
            `<li>${text}</li>`
          ).join('');
        }
      }

      const todoList = new TodoList(data);

      todoList.render();
    </script>
  </body>
</html>
