<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>

  <div id="todo-list"></div>
  <div id="todo-list1"></div>
  <div id="todo-list2"></div>
  <script>
    var data = [
      {
        text: 'JS 공부하기',
        isCompleted: true
      },
      {
        text: 'JS 복습하기',
        isCompleted: false
      }
    ]

    var data1 = [
      {
        text: 'express복습',
        isCompleted: false
      },
      {
        text: 'react공부',
        isCompleted: false
      }
    ]

    var data2 = [
      {
        text: '청첩장주문',
        isCompleted: false
      },
      {
        text: '드레스셀렉',
        isCompleted: true
      }
    ]
	// 이곳에서 코딩을 시작하세요!

  
  // * TodoList 라는 이름을 가진 함수를 작성합니다.

  function TodoList(data, $target){
    // #50 new 키워드로 함수의 인스턴스를 만들 때 올바른 파라메터가 넘어오지 않을 경우 에러 발생하게 하기
    if(data === undefined || data === null || !(Array.isArray(data)) ){
      throw new Error("파라메터가 올바르지 않습니다. 다시 확인해 주세요");
    }
    // #50 new 키워드 안 붙이고 함수 실행 시 에러 발생하게 하기
    else if (!new.target){
      throw new Error("new 키워드가 없습니다");
    }
    this.data = data;
    
    //#67 TodoList 컴포넌트 내에 text 렌더링 시, isCompleted 값이 true인 경우 <s> 태그를 이용해 삭선처리를 해주는 걸 추가합니다
    this.render = function(){
      // map 구현
      $target.innerHTML = this.data.map(
        (arr)=> 
        // {
        //   if(arr.isCompleted) return `<li><s>${arr.text}</s></li>`
        //   return `<li>${arr.text}</li>`
        // }
        arr.isCompleted ? `<li><s>${arr.text}</s></li>`: `<li>${arr.text}</li>`
      ).join('')
    }


    this.setState= function(nextData){
      this.data = nextData;
      this.render();
    }

    this.render();
  }


//   <div id="todo-list"></div> 외의 다른 div를 두 개 더 html 코드에 만듭니다.
// div의 id는 적당한 이름으로 지어주세요.
// js
// var data = [{ ... }] 외에 todo를 담고 있는 array data를 두 개 더 만듭니다.
// todo의 내용은 본인의 현재 todo를 담아서 넣으면 더 좋겠죠?
// TodoList 컴포넌트를 총 세 개 만듭니다. 첫 번째 컴포넌트에는 제가 넣어둔 data와 #todo-list에 렌더링하고, 나머지 두 개는 여러분이 추가하신 div + data를 활용해서 만들어주세요.

  const todoList = new TodoList(data, document.querySelector('#todo-list'));
  const todoList1 = new TodoList(data1, document.querySelector('#todo-list1'));
  const todoList2 = new TodoList(data2, document.querySelector('#todo-list2'));

  // #67
  todoList.setState([
    ...data,
    {
      text:'추가',
      isCompleted: true
    }
  ]);
  </script>
</body>
</html>
