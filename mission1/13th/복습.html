<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>

  <div id="todo-list"></div>
  <form class="todo-form">
    <input type ="text" name="todo" />
    <button>추가</button>
  </form>


  <script>
    var data = [
      {
        text: 'JS 공부하기'
      },
      {
        text: 'JS 복습하기'
      }
    ]
    var data1 = [
      {
        text: 'JS 공부하기1'
      },
      {
        text: 'JS 복습하기1'
      }
    ]
    var data2 = [
      {
        text: 'JS 공부하기2'
      },
      {
        text: 'JS 복습하기2'
      }
    ]
	// 이곳에서 코딩을 시작하세요!

  
  // * TodoList 라는 이름을 가진 함수를 작성합니다.


  function TodoList({ initialState, $target }){
    this.state = initialState

    this.render = () => {
      $target.innerHTML = `
      ${this.state.map(
        (todo) => `<li>${todo.text}</li>`).join('\n')}
      `
    }

    this.setState = (nextState) =>{
      this.state = nextState
      this.render()
    }

    //이게 제대로된 컴포넌트 화인가? 이벤트는 따로 분리해야되나? 
    this.addEvent = ($form) =>{
      document.querySelector($form).addEventListener('submit',(e) =>{
        e.preventDefault()
        const $input = e.target.querySelector('input[name="todo"]')
        this.setState([
          ...this.state,
          {
            text: $input.value,
          },
        ])
          
        $input.value=''
      })

    }

    this.render();
  }

  const todoList = new TodoList({
    initialState : data,
    $target : document.querySelector('#todo-list')
  })

  todoList.addEvent('.todo-form');

  // setTimeout(() => {
  //   todoList.setState([
  //     ...data,
  //     {
  //       text:'추가될 것이다'
  //     },
  //   ])
  // });
  
  // input 입력으로 todo list 추가하기
  // document.querySelector('.todo-form').addEventListener('submit', (e) => {
  //   e.preventDefault()
  //   const $input = e.target.querySelector('input[name="todo"]');

  //   todoList.setState([
  //     ...todoList.state,
  //     {
  //       text: $input.value,
  //     },
  //   ])

  //   $input.value=''
  // })



  //이코드는 안되요~ 
  // document.querySelector("#todo-list").innerHTML = data.map(function(item){
  //   return `<li>${item.text}</li>`
  // })
  // .join('')
  // //일정 기간 이후에 dta가 두개 추가되었다 어떻게 해야할까 

  // data.push({
  //   text:'흠',
  // })
  // data.push({
  //   text:'흐음',
  // })
  // setTimeout( ()=> {
  //   document.querySelector("#todo-list").innerHTML = data.map(function(item){
  //     return `<li>${item.text}</li>`
  //   })
  //   .join('')
  // })
  </script>
</body>
</html>