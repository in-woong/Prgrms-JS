<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>
  <div id="todo-list"></div>
  <script>
    var data = [
      {
        text: 'JS 공부하기',
        isCompleted: false
      },
      {
        text: 'JS 복습하기',
        isCompleted: true
      },
      { 
        text: '코딩하기',
        isCompleted: true
      },
      {
        text: '집안 청소하기',
        isCompleted: false
      }
    ]
  // 1.render와 setState 함수의 책임은 무엇인지 곰곰히 생각해보기
    
	// 이곳에서 코딩을 시작하세요!
  function TodoList(data) { 
      // querySelector vs getElementById 생각 해보기
      const div = document.querySelector("#todo-list");
      const form = document.createElement('form');
      const input = document.createElement("input");
      const button = document.createElement("button");
      const buttonText = document.createTextNode("할 일 추가하기");
      const ol = document.createElement("ol");
      button.appendChild(buttonText);
      div.appendChild(form);
      div.appendChild(ol);
      form.appendChild(input);
      form.appendChild(button);

      form.addEventListener("submit", (e) => { 
          e.preventDefault();
          if(input.value.length !== 0){  
            this.setState([...this.list, {text: input.value, isCompleted: false}])
            input.value = ""; 
          }
      })
      
      const checkUsingNewKeyword = (() => { 
        if(!new.target) { 
          throw Error("new keyword 사용하세요.");
        }
      })();

      const checkTypeParameter = ((data) => { 
        if(!Array.isArray(data)){
          throw new Error('array가 아닌 형태의 데이터입니다.')
        }
      })(data);
      
      this.setState = function(data) { 
        this.list = data;
        this.render();
      }
      
      this.render = function(){ 
        ol.innerHTML = `${this.list.map( ({text, isCompleted}) => isCompleted ? `<li><s>${text}</s></li>` : `<li>${text}</li>` ).join("")}`;
      }       

      this.setState(data);
    };
    
    const todoList = new TodoList(data);
    
  </script>
</body>
</html>
