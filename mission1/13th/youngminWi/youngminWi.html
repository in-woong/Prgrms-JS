<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>
  <div id="todo-list__1"></div>
  <div id="todo-list__2"></div>
  <div id="todo-list__3"></div>
  
  <script>
     const data1 = [
      {
        text: 'JS 공부하기',
        isCompleted: true
      },
      {
        text: 'JS 복습하기',
        isCompleted: true
      }
    ];
    const data2 = [
      {
        text: '줄넘기',
        isCompleted: true
      },
      {
        text: '라이딩',
        isCompleted: false,
      },
      {
        text: '책 읽기',
        isCompleted: false,
      }
    ]
    const data3 = [
      {
        text: '점심 먹기',
        isCompleted: true,
      },
      {
        text: '저녁 먹기',
        isCompleted: true,
      }
    ]

    function TodoList(data, id) {

      if(!new.target) {
        throw new Error('new 키워드를 사용해서 인스턴스를 생성하세요.');
      }

      if(!Array.isArray(data) || data.length === 0) {
        throw new Error('데이터는 길이가 1 이상인 배열 형태이어야 합니다.')
      } 

      if(!data.every(obj => 'text' in obj)) {
        throw new Error('데이터 내에 text 테스트가 없습니다.');
      }

      this.id = id;
      this.data = data;
      
      this.render = function() {
        const $todoListEl = document.querySelector(`#todo-list__${this.id}`);
        
        // 렌더링 할 텍스트 요소 = 삼항 연산자(ternary operator) 로 구분
        const texts = this.data.map(obj => { 
          return obj.isCompleted ? `<li><s>${obj.text}</s></li>` : `<li>${obj.text}</li>`; 
        } ).join('');

        $todoListEl.innerHTML = texts;
      }
    }

   
    const todoList1 =  new TodoList(data1, 1);
    todoList1.render();

    const todoList2 =  new TodoList(data2, 2);
    todoList2.render();

    const todoList3 =  new TodoList(data3, 3);
    todoList3.render();

    
  </script>
</body>
</html>