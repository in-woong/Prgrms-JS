<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>
  <div id="todo-list"></div>
  <script>
    function TodoList(data) {
      // 인스턴스 생성시 new 키워드를 사용하지 않은 경우 -> 에러 발생
      if(!new.target) {
        throw new Error('new 키워드를 사용해서 인스턴스를 생성하세요.');
      } 
      // 파라미터 데이터가 배열 형태(요소가 있는)가 아닌 경우 -> 에러 발생
      if(!Array.isArray(data) || data.length === 0) {
        throw new Error('데이터는 길이가 1 이상인 배열 형태이어야 합니다.')
      } 
      // 파라미터 데이터 내 text 데이터가 없는 경우 -> 에러 발생
      if(!data.every(obj => 'text' in obj)) {
        throw new Error('데이터 내에 text 테스트가 없습니다.');
      }
      
      this.data = data;

      this.render = function() {
        const $todoListEl = document.querySelector('#todo-list');
        const texts = this.data.map(obj => `<li>${obj.text}</li>`).join('');

        $todoListEl.innerHTML = texts;
      }
    }

    const data = [
      {
        text: 'JS 공부하기'
      },
      {
        text: 'JS 복습하기'
      }
    ];

    const todoList =  new TodoList(data);
    todoList.render();

    // 에러 체크 테스트
    // const a = new TodoList('text');                     // Uncaught Error: 데이터는 길이가 1 이상인 배열 형태이어야 합니다.
    // const b = new TodoList([]);                         // Uncaught Error: 데이터는 길이가 1 이상인 배열 형태이어야 합니다.
    // const c = new TodoList([{ data : 'JS 고수되기' }])  // Uncaught Error: 데이터 내에 text 테스트가 없습니다.
  </script>
</body>
</html>