<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>
  <div id="todo-list"></div>
  <div id="today-list"></div>
  <div id="tomorrow-list"></div>

  <script>
    const data = [
      {
        text: 'JS 공부하기'
      },
      {
        text: 'JS 복습하기'
      }
    ]
	// 이곳에서 코딩을 시작하세요!
  const data2 = [
    {text:'미션 수행하기',
    isCompleted:true},
    {text:'미션 커밋하기',
    isCompleted:false}
  ];
  const data3 = [
    {text:'미션1 끝내기',
    isCompleted:false},
    {text:'미션1 복습하기',
    isCompleted:true}
  ];


  function TodoList(data, ulId){
    this.isValidate = function () {
      if(!data || !Array.isArray(data)) {
        throw new Error('데이터의 형식이 올바르지 않습니다.')
      }
      data.forEach((todo) => {
        if(!todo.hasOwnProperty('text') || !todo.hasOwnProperty('isCompleted')) {
          throw new Error('데이터는 할 일과 완료 여부가 포함돼야 합니다!')
        }
      });

      data.forEach(({text, isCompleted}) => {
        if(typeof text != 'string') {
          throw new Error('todo가 문자열이 아닙니다!')
        }
        if(typeof isCompleted !== 'boolean') {
          throw new Error('isCompleted를 다시 확인해주세요')
        }
      });
    }
    this.isValidate();
    this.data = data;
    this.ulId = ulId;

    if(!new.target) { //보너스:new키워드 안 붙이고 함수 실행 시 에러발생하게 하기
      throw new Error('new키워드를 사용해주세요!')
    }
    this.render = function () {
      const html = `${this.data.map(({text, isCompleted}) =>
      isCompleted? `<li><s>${text}</s></li>` : `<li>${text}</li>`)
    .join('')}`

    document.querySelector(`#${ulId}`).innerHTML = html
    }
    this.setState = function (data) {//보너스:setState 새롭게 렌더링
      this.isValidate(data);
      this.data = data;
      this.render();
    }
    this.render();

  }
  const todoList = new TodoList(data, 'todo-list');
  const todo2List = new TodoList(data2, 'today-list');
  const todo3List = new TodoList(data3, 'tomorrow-list');

  todoList.setState(data2);
  </script>
</body>
</html>