<html>
  <head>
    <title>Mission 1</title>
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="todo-list"></div>
    <div id="work-list"></div>
    <div id="shopping-list"></div>
    <script>
      function isValidate(data) {
        if (data == undefined)
          throw new Error('data 가 undefined 혹은 null 입니다.');

        if (!Array.isArray(data)) throw new Error('배열의 형태가 맞나요?');
      }

      function TodoList(data, id) {
        if (!(this instanceof TodoList)) {
          return new TodoList(data);
        }

        isValidate(data);

        this.data = data;

        this.render = function () {
          const getElementId = document.querySelector(`#${id}`);
          const listText = this.data
            .map((item) => {
              return item.isCompleted
                ? `<s>${item.text}</s><br/>`
                : `<li>${item.text}</li>`;
            })
            .join('');
          getElementId.innerHTML = `<ul>${listText}</ul>`;
        };

        this.setState = function (nextData = data) {
          isValidate(nextData);
          this.data = nextData;
          this.render();
        };
      }

      const data = [
        {
          text: 'JS 공부하기',
          isCompleted: true,
        },
        {
          text: 'JS 복습하기',
          isCompleted: false,
        },
      ];

      const workData = [
        {
          text: '테니스 하기',
          isCompleted: true,
        },
        {
          text: '수영하기',
          isCompleted: true,
        },
      ];

      const shoppingData = [
        {
          text: '가방사기',
          isCompleted: false,
        },
        {
          text: '코트사기',
          isCompleted: false,
        },
      ];

      const todoList = new TodoList(data, 'todo-list');
      const workList = new TodoList(workData, 'work-list');
      const shoppingList = new TodoList(shoppingData, 'shopping-list');

      todoList.setState([
        {
          text: '새로운 데이터',
          isCompleted: true,
        },
      ]);
      workList.setState();
      shoppingList.setState();
    </script>
  </body>
</html>
