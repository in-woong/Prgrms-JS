<html>

<head>
  <title>Mission 1</title>
  <meta charset="utf-8" />
</head>

<body>
  <div id="todo-list"></div>
  <div id="todo-list1"></div>
  <div id="todo-list2"></div>
  <script>
    var data = [{
        text: 'JS 공부하기',
        isCompleted: true

      },
      {
        text: 'JS 복습하기',
        isCompleted: false
      }
    ]
    //JS 복습하기 completed
    var nextData = [{
        text: 'JS 공부하기 ',
        isCompleted: true

      },
      {
        text: 'JS 복습하기',
        isCompleted: true
      }
    ]

    var data1 = [{
        text: 'SQL 공부하기'
      },
      {
        text: 'SQL 복습하기'
      }
    ]

    var data2 = [{
        text: 'MSA 공부하기'
      },
      {
        text: 'MSA 복습하기'
      }
    ]

    function TodoList(todos, elementId) {
      this.todos = todos;

      //validation check
      if (!new.target)
        throw new Error("new 호출 미사용");
      if (!todos || !Array.isArray(todos))
        throw new Error("올바르지 않은 데이터형식");

      todos.forEach(todo => {
        if (!todo.hasOwnProperty('text'))
          throw new Error("text 항목은 필수입력");
      });

      this.render = function() {
        elementId.innerHTML = todos.map(todos => {
          if (todos.isCompleted)
            return `<s>${todos.text}</s>`;
          else
            return todos.text;
        }).join('<br/>');
      }

      this.setStatus = function(nextData) {
        todos = nextData;
        this.render();
      }

      this.render();
    }

    var elementId = document.querySelectorAll("div");
    var todoList = new TodoList(data, elementId[0]);
    todoList.setStatus(nextData); //JS 복습하기 completed
    var todoList1 = new TodoList(data1, elementId[1]);
    var todoList2 = new TodoList(data2, elementId[2]);
  </script>
</body>
</html>
